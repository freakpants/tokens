<!doctype html>
<html>

<head>
  <title>Futties Collector</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link rel="stylesheet" href="css.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Secular+One">
</head>

<body>
  <div id="overlay_bg"></div>
  <div class="futties-header">
    <h1>Futties Collector</h1>
    <div id="futties_counters">
      <h3>Collected: <span id="collected">0/307</span></h3>
      <h3>Displaying: <span id="displaying">307/307</span></h3>
    </div>
    <button id="futties_reset" class="reset btn-standard call-to-action">
      <span class="button__text">Reset Collection</span>
    </button>
    <button class="unclaim btn-standard call-to-action">
      <span class="button__text">Uncollect</span>
    </button>
    <div id="batch_wrapper">
      <div>
        <input type="checkbox" id="toggleallbatches" name="toggleallbatches" checked>
        <label for="toggleallbatches">Toggle All Batches</label>
      </div>
      <div>
        <input type="checkbox" id="togglebatch1" name="togglebatch1" checked>
        <label for="togglebatch1l">Batch 1</label>
      </div>
      <div>
        <input type="checkbox" id="togglebatch2" name="togglebatch2" checked>
        <label for="togglebatch2">Batch 2</label>
      </div>
      <div>
        <input type="checkbox" id="togglebatch3" name="togglebatch3" checked>
        <label for="togglebatch3">Batch 3</label>
      </div>
    </div>
    <div id="checkbox_wrapper" class="checkbox_wrapper_futties">
      <div>
        <input type="checkbox" id="toggleall" name="toggleall" checked>
        <label for="toggleall">Toggle All</label>
      </div>
      <div>
        <input type="checkbox" id="shapeshifters" name="shapeshifters" checked>
        <label for="sbc">Shapeshifters</label>
      </div>
      <div>
        <input type="checkbox" id="toty" name="toty" checked>
        <label for="toty">TOTY</label>
      </div>
      <div>
        <input type="checkbox" id="tots" name="tots" checked>
        <label for="objectives">TOTS</label>
      </div>
      <div>
        <input type="checkbox" id="uecl" name="uecl" checked>
        <label for="uecl">CL Live</label>
      </div>
      <div>
        <input type="checkbox" id="fantasy" name="fantasy" checked>
        <label for="toty">FUT Fantasy</label>
      </div>
      <div>
        <input type="checkbox" id="headliners" name="headliners" checked>
        <label for="headliners">Headliners</label>
      </div>
      <div>
        <input type="checkbox" id="captains" name="captains" checked>
        <label for="captains">FUT Captains</label>
      </div>
      <div>
        <input type="checkbox" id="promo" name="promo" checked>
        <label for="promo">TOTGS</label>
      </div>
      <div>
        <input type="checkbox" id="futurestars" name="futurestars" checked>
        <label for="futurestars">Future Stars</label>
      </div>
      <div>
        <input type="checkbox" id="birthday" name="birthday" checked>
        <label for="birthday">FUT Birthday</label>
      </div>
      <div>
        <input type="checkbox" id="wildcard" name="wildcard" checked>
        <label for="wildcard">Winter Wildcards</label>
      </div>
      <div>
        <input type="checkbox" id="signature" name="signature" checked>
        <label for="signature">Signature Signings</label>
      </div>
      <div>
        <input type="checkbox" id="numbersup" name="numbersup" checked>
        <label for="numbersup">Numbersup</label>
      </div>
      <div>
        <input type="checkbox" id="totw" name="totw" checked>
        <label for="totw">TOTW</label>
      </div>
      <div>
        <input type="checkbox" id="honourable" name="honourable" checked>
        <label for="honourable">TOTY Honour</label>
      </div>
      <div>
        <input type="checkbox" id="elfinal" name="elfinal" checked>
        <label for="elfinal">EL Live</label>
      </div>
      <div>
        <input type="checkbox" id="halloween" name="halloween" checked>
        <label for="halloween">Rulebreakers</label>
      </div>
      <div>
        <input type="checkbox" id="rttk" name="rttk" checked>
        <label for="rttk">RTTK</label>
      </div>
      <div>
        <input type="checkbox" id="otw" name="otw" checked>
        <label for="otw">Ones To Watch</label>
      </div>
      <div>
        <input type="checkbox" id="versusfire" name="versusfire" checked>
        <label for="versusfire">Versus Fire</label>
      </div>
      <div>
        <input type="checkbox" id="versusice" name="versusice" checked>
        <label for="versusice">Versus Ice</label>
      </div>
      <div>
        <input type="checkbox" id="motm" name="motm" checked>
        <label for="totw">MOTM</label>
      </div>
      <div>
        <input type="checkbox" id="gold" name="gold" checked>
        <label for="totw">Gold</label>
      </div>
    </div>
  </div>
  <div id="counters">
    <h3>Claimed: <span id="claimed"></span></h3>
    <h3>Expired: <span id="expired"></span></h3>
    <h3>Missed: <span id="missed"></span></h3>
    <h3>Max. possible: <span id="max"></span></h3>
  </div>
  <div class="header">
    <h1>Summer Swaps 2</h1>
    <h2>Token Tracker</h2>
    <div id="attribution">
      <h3 id="docs">?</h3>
    </div>

    <div id="button-wrapper">
      <button class="unclaim btn-standard call-to-action">
        <span class="button__text">Unclaim tokens</span>
      </button>
      <button id="token_reset" class="reset btn-standard call-to-action">
        <span class="button__text">Reset all claimed tokens</span>
      </button>
      <button id="rewards" class="btn-standard call-to-action">
        <span class="button__text">Rewards</span>
      </button>
      <button id="futties" class="btn-standard call-to-action">
        <span class="button__text">Futties Collector</span>
      </button>

    </div>
    <div id="checkbox_wrapper" class="checkbox_wrapper_tokens">
      <div>
        <input type="checkbox" id="sbc" name="sbc" checked>
        <label for="sbc">SBC's</label>
      </div>
      <div>
        <input type="checkbox" id="objectives" name="objectives" checked>
        <label for="objectives">Objectives</label>
      </div>
      <div>
        <input type="checkbox" id="packs" name="packs" checked>
        <label for="packs">Packs</label>
      </div>
    </div>

  </div>
  <div id="tokens"></div>
</body>
<script>

  document.unclaim_mode = false;

  const playerIdentity = window.location.search.substr(1);

  document.futtiescollector = true;

  document.futties_collected = 0;

  document.tokens_expired = 0;

  document.missed = 0;

  let tokens_number = 0;

  $(document).ready(function () {
    $(".reset").click(function () {
      if (document.futtiescollector) {

        if (playerIdentity !== '') {
          localStorage.setItem("document.claimed_futties" + playerIdentity, JSON.stringify([]));
        } else {
          localStorage.setItem("document.claimed_futties", JSON.stringify([]));
        }
      } else {
        if (playerIdentity !== '') {
          localStorage.setItem("document.claimed_tokens" + playerIdentity, JSON.stringify([]));
        } else {
          localStorage.setItem("document.claimed_tokens", JSON.stringify([]));
        }
      }

      location.reload();
    }
    );

    $(".unclaim").click(function () {
      if (document.unclaim_mode == true) {
        document.unclaim_mode = false;
        $(".unclaim").removeClass("mode-active");
      } else {
        document.unclaim_mode = true;
        $(".unclaim").addClass("mode-active");
      }
    }
    );

    $("#rewards").click(function () {
      location.href = "https://i.redd.it/mue2mtnphje91.png";
    }
    );

    $("#docs").click(function () {
      location.href = "https://github.com/freakpants/tokens/blob/main/README.md";
    }
    );
  });

  function update_token_count() {
    let expired_tokens_done = $(".expired.token-claimed").length;
    $("#claimed").text(document.claimed_tokens.length + "/" + document.available_tokens);
    $("#expired").text(document.tokens_expired);
    $("#missed").text(document.missed - expired_tokens_done);
    $("#max").text(50 - document.missed + expired_tokens_done);
  }

  function update_futties_counter() {
    $("#collected").text(document.claimed_futties.length + "/" + 307);
    $("#displaying").text($("#tokens .card:visible").length + "/" + 307);
  }

  function mark_tokens() {
    document.claimed_tokens = '';
    document.claimed_futties = '';
    if (document.futtiescollector) {
      if (playerIdentity !== '') {
        document.claimed_futties = localStorage.getItem('document.claimed_futties' + playerIdentity);
      } else {
        document.claimed_futties = localStorage.getItem('document.claimed_futties');
      }

      if (document.claimed_futties == null) {
        document.claimed_futties = [];
      } else {
        document.claimed_futties = JSON.parse(document.claimed_futties);
      }
      document.claimed_futties.forEach(function (token) {
        const parts = token.split('-');
        $('div[data-base-id="' + parts[0] + '"][data-rarity-id="' + parts[1] + '"]').addClass('token-claimed');
      });
      update_futties_counter();

    } else {
      if (playerIdentity !== '') {
        document.claimed_tokens = localStorage.getItem('document.claimed_tokens' + playerIdentity);
      } else {
        document.claimed_tokens = localStorage.getItem('document.claimed_tokens');
      }

      if (document.claimed_tokens == null) {
        document.claimed_tokens = [];
        document.claimed_tokens.push(166847);
      } else {
        document.claimed_tokens = JSON.parse(document.claimed_tokens);
      }

      document.claimed_tokens.forEach(function (token) {
        $('div[data-base-id="' + token + '"]').addClass('token-claimed');
      });

      update_token_count();

    }


  }



  // add data counter to each card
  // $('#tokens > div').each(function(index) {
  //   $(this).attr('data-token-id', index + 1);
  // });



  function add_darken_class() {
    $('#tokens div').each(function (index) {
      // if this has class token_source, dont darken
      if (!$(this).hasClass('token_source') && !$(this).hasClass('token_objective') && !$(this).hasClass('token_objective_wrapper') && !$(this).hasClass('attributes')) {
        $(this).addClass('darken');
      }
    });
  }

  function card_click(parent) {
    if ($(parent).hasClass('inactive')) {
      return;
    }
    if ($(parent).hasClass('token-claimed')) {
      if (document.unclaim_mode == true) {
        console.log("removing token-claimed class");
        $(parent).removeClass("token-claimed");
        let token_id = $(this).data('base-id');

        if (document.futtiescollector) {
          token_id = $(this).data('base-id') + "-" + $(this).data('rarity-id');
          let index = document.claimed_futties.indexOf(token_id);
          document.claimed_futties.splice(index, 1);
          if (playerIdentity !== '') {
            localStorage.setItem("document.claimed_futties" + playerIdentity, JSON.stringify(document.claimed_futties));
          } else {
            localStorage.setItem("document.claimed_futties", JSON.stringify(document.claimed_futties));
          }
          update_futties_counter();
        } else {
          let index = document.claimed_tokens.indexOf(token_id);
          document.claimed_tokens.splice(index, 1);
          if (playerIdentity !== '') {
            localStorage.setItem("document.claimed_tokens" + playerIdentity, JSON.stringify(document.claimed_tokens));
          } else {
            localStorage.setItem("document.claimed_tokens", JSON.stringify(document.claimed_tokens));
          }
          update_token_count();
        }


        return;
      } else {
        console.log("doing nothing because unclaim mode is false");
        return;
      }
    }

    if (!document.unclaim_mode) {
      $(parent).addClass('token-claimed');

      if (document.futtiescollector) {
        document.claimed_futties.push($(parent).data('base-id') + "-" + $(parent).data('rarity-id'));
        if (playerIdentity !== '') {
          localStorage.setItem("document.claimed_futties" + playerIdentity, JSON.stringify(document.claimed_futties));
        } else {
          localStorage.setItem("document.claimed_futties", JSON.stringify(document.claimed_futties));
        }
        update_futties_counter();
      } else {
        document.claimed_tokens.push($(parent).data('base-id'));
        if (playerIdentity !== '') {
          localStorage.setItem("document.claimed_tokens" + playerIdentity, JSON.stringify(document.claimed_tokens));
        } else {
          localStorage.setItem("document.claimed_tokens", JSON.stringify(document.claimed_tokens));
        }
        update_token_count();
      }
    }

  }



  function name_copy(event) {
    const id = $(event.target).data("base-id");
    var copyTextarea = document.querySelector('[data-type="name"][data-base-id="' + id + '"]');
    console.log(copyTextarea);

    $(copyTextarea).parent().show();

    copyTextarea.type = "text";
    copyTextarea.focus();
    copyTextarea.select();
    document.execCommand("copy");
    $(copyTextarea).parent().hide();
    copyTextarea.type = "hidden";
    event.stopPropagation();
  }

  if (document.futtiescollector) {
    enable_futties();
  } else {
    ajax({
      url: "https://freakpants.github.io/tokens/tokens.json",
    }).done(function (result) {
      console.log(result);
      result.forEach(function (player) {
        $('#tokens').append(player);
        tokens_number++;

      });
      // remember how many tokens are available
      document.available_tokens = tokens_number;
      // generate the rest of the empty divs
      for (let i = tokens_number; i < 50; i++) {
        $('#tokens').append(`
      <div class="card bronze fifa22 inactive" data-base-id="" data-club-id="1929" data-nation-id="14" data-league-id="60" data-rareflag="0">
          <div class="token_number">${i + 1}</div>
          <div class="scard bronze fifa22 style="position: relative; z-index: 2">

              <img src="token.png" alt="" class="player-card">
  
              <div class="rating-gradient"></div>

              
              <div class="avatarholder ">
                  </div>
  
        
              

          </div>
      </div>
      </div>
      `);
      }
      mark_tokens();
      add_darken_class();
      $('#tokens .card.fifa22').click(function () {
        const element = $(this);
        card_click(element);
      });

      $(".marquee").click(function (event) {
        name_copy(event);
      });

      $("#futties").click(function () {
        enable_futties();
      }
      );

      $("#objectives").click(function () {
        if (this.checked) {
          $("[data-type='objective']").closest(".fifa22.card").fadeIn();
        } else {
          $("[data-type='objective']").closest(".fifa22.card").fadeOut();
        }
      });

      $("#sbc").click(function () {
        if (this.checked) {
          $("[data-type='sbc']").closest(".fifa22.card").fadeIn();
        } else {
          $("[data-type='sbc']").closest(".fifa22.card").fadeOut();
        }
      });

      $("#packs").click(function () {
        if (this.checked) {
          $("[data-type='pack']").closest(".fifa22.card").fadeIn();
        } else {
          $("[data-type='pack']").closest(".fifa22.card").fadeOut();
        }
      });

      $(".token_objective_wrapper").each(function (index) {
        const timeStamp = $(this).attr('data-timestamp');
        if (timeStamp == 0) {
          return;
        }
        const timeLeft = timeStamp - (Math.floor(Date.now() / 1000));
        if (timeLeft < 0) {
          document.tokens_expired++;
          document.missed++;
          const closest = $(this).closest(".card.fifa22");
          $(closest).addClass("expired");
          $(closest).find(".token_objective_wrapper").addClass("expired");
          $(closest).find(".token_objective").html("EXPIRED");
          return;
        }
        const timeLeftDays = Math.floor(timeLeft / 86400);
        if (timeLeftDays <= 2) {
          const timeLeftHours = Math.floor(timeLeft / 3600);
          $(this).find(".token_objective").append('<b> (' + timeLeftHours + 'H)</b>');
        }
        if (timeLeftDays == 0) {
          $(this).closest(".card.fifa22").addClass("warning");
        }
      }
      );
      update_token_count();

    });
  }

  function update_batches(trigger) {
    let batches = [];
    batches[1] = $("#togglebatch1").prop("checked");
    batches[2] = $("#togglebatch2").prop("checked");
    batches[3] = $("#togglebatch3").prop("checked");
    switch (trigger) {
      case 1:
        if (batches[1]) {
          // fade in batch 1
          $("[data-futties-1]").closest(".card.fifa22").fadeIn(update_futties_counter);
        } else {
          if (batches[2]) {
            if (batches[3]) {
              // fade out batch 1 only
              $("[data-futties-1][data-futties-2!=1][data-futties-3!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            } else {
              // fade out batch 1 and 3
              $("[data-futties-1][data-futties-2!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
              $("[data-futties-3][data-futties-2!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            }
          } else {
            if (batches[3]) {
              // fade out batch 1 and 2
              $("[data-futties-1][data-futties-3!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
              $("[data-futties-2][data-futties-3!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            } else {
              // fade out all
              $(".card.fifa22").fadeOut(update_futties_counter);
            }
          }
        }
        break;
      case 2:
        if (batches[2]) {
          // fade in batch 2
          $("[data-futties-2]").closest(".card.fifa22").fadeIn(update_futties_counter);
        } else {
          if (batches[1]) {
            if (batches[3]) {
              // fade out batch 2 only
              $("[data-futties-2][data-futties-1!=1][data-futties-3!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            } else {
              // fade out batch 2 and 3
              $("[data-futties-2][data-futties-1!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
              $("[data-futties-3][data-futties-1!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            }
          } else {
            if (batches[3]) {
              // fade out batch 1 and 2
              $("[data-futties-1][data-futties-3!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
              $("[data-futties-2][data-futties-3!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            } else {
              // fade out all
              $(".card.fifa22").fadeOut(update_futties_counter);
            }
          }
        }
        break;
      case 3:
        if (batches[3]) {
          // fade in batch 3
          $("[data-futties-3]").closest(".card.fifa22").fadeIn(update_futties_counter);
        } else {
          if (batches[1]) {
            if (batches[2]) {
              // fade out batch 3 only
              $("[data-futties-3][data-futties-1!=1][data-futties-2!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            } else {
              // fade out batch 3 and 2
              $("[data-futties-3][data-futties-1!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
              $("[data-futties-2][data-futties-1!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            }
          } else {
            if (batches[2]) {
              // fade out batch 3 and 1
              $("[data-futties-3][data-futties-2!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
              $("[data-futties-1][data-futties-2!=1]").closest(".card.fifa22").fadeOut(update_futties_counter);
            } else {
              // fade out all
              $(".card.fifa22").fadeOut(update_futties_counter);
            }
          }
        }
    }
  }

  function enable_futties() {
    document.futtiescollector = true;
    let player_number = 0;
    $("#criminal").hide();
    $("#tokens").html("");
    $("body").addClass("futties");
    $(".header").hide();
    $(".futties-header").show();
    $("#overlay_bg").show();

    // add futties class to token div
    $('#tokens').addClass('futties');
    $.ajax({
      url: "https://freakpants.github.io/collector/players.json",
    }).done(function (result) {
      console.log();
      result.forEach(function (player) {
        $('#tokens').append(player);
        player_number++;


      });
      // bind the click events again
      $(".marquee").click(function (event) {
        name_copy(event);
      });
      $('#tokens .card.fifa22').click(function () {
        const element = $(this);
        card_click(element);
      });

      add_darken_class();

      mark_tokens();

      $("#shapeshifters").click(function () {
        if (this.checked) {
          $(".card.shapeshifters").fadeIn(update_futties_counter);
        } else {
          $(".card.shapeshifters").fadeOut(update_futties_counter);
        }

      });

      $("#tots").click(function () {
        if (this.checked) {
          $(".card.goldblue").fadeIn(update_futties_counter);
        } else {
          $(".card.goldblue").fadeOut(update_futties_counter);
        }
      });

      $("#toty").click(function () {
        if (this.checked) {
          $("[data-rareflag=5]").fadeIn(update_futties_counter);
        } else {
          $("[data-rareflag=5]").fadeOut(update_futties_counter);
        }
      });


      $("#fantasy").click(function () {
        if (this.checked) {
          $(".card.fantasypurple").fadeIn(update_futties_counter);
        } else {
          $(".card.fantasypurple").fadeOut(update_futties_counter);
        }
      });

      $("#uecl").click(function () {
        if (this.checked) {
          $(".card.championsleague").fadeIn(update_futties_counter);
        } else {
          $(".card.championsleague").fadeOut(update_futties_counter);
        }
      });

      $("#headliners").click(function () {
        if (this.checked) {
          $(".card.futheadliners").fadeIn(update_futties_counter);
        } else {
          $(".card.futheadliners").fadeOut(update_futties_counter);
        }
      });

      $("#captains").click(function () {
        if (this.checked) {
          $(".card.futcaptains").fadeIn(update_futties_counter);
          $(".card.futcaptainsheroes").fadeIn(update_futties_counter);

        } else {
          $(".card.futcaptains").fadeOut(update_futties_counter);
          $(".card.futcaptainsheroes").fadeOut(update_futties_counter);
        }
      });

      $("#promo").click(function () {
        if (this.checked) {
          $(".card.promo").fadeIn(update_futties_counter);
          $(".card.confleague").fadeIn(update_futties_counter);
        } else {
          $(".card.promo").fadeOut(update_futties_counter);
          $(".card.confleague").fadeOut(update_futties_counter);
        }
      });

      $("#birthday").click(function () {
        if (this.checked) {
          $(".card.birthday").fadeIn(update_futties_counter);
        } else {
          $(".card.birthday").fadeOut(update_futties_counter);
        }
      });

      $("#otw").click(function () {
        if (this.checked) {
          $(".card.onestowatch").fadeIn(update_futties_counter);
        } else {
          $(".card.onestowatch").fadeOut(update_futties_counter);
        }
      });

      $("#wildcard").click(function () {
        if (this.checked) {
          $(".card.wildcard").fadeIn(update_futties_counter);
        } else {
          $(".card.wildcard").fadeOut(update_futties_counter);
        }
      });

      $("#signature").click(function () {
        if (this.checked) {
          $(".card.signature").fadeIn(update_futties_counter);
        } else {
          $(".card.signature").fadeOut(update_futties_counter);
        }
      });

      $("#numbersup").click(function () {
        if (this.checked) {
          $(".card.numbersup").fadeIn(update_futties_counter);
        } else {
          $(".card.numbersup").fadeOut(update_futties_counter);
        }
      });

      $("#elfinal").click(function () {
        if (this.checked) {
          $(".card.elfinal").fadeIn(update_futties_counter);
        } else {
          $(".card.elfinal").fadeOut(update_futties_counter);
        }
      });

      $("#halloween").click(function () {
        if (this.checked) {
          $(".card.halloween").fadeIn(update_futties_counter);
        } else {
          $(".card.halloween").fadeOut(update_futties_counter);
        }
      });

      $("#rttk").click(function () {
        if (this.checked) {
          $(".card.clfinal").fadeIn(update_futties_counter);
        } else {
          $(".card.clfinal").fadeOut(update_futties_counter);
        }
      });

      // toggle future stars
      $("#futurestars").click(function () {
        if (this.checked) {
          $(".card.futurestars").fadeIn(update_futties_counter);
        } else {
          $(".card.futurestars").fadeOut(update_futties_counter);
        }
      });

      // toggle totw
      $("#totw").click(function () {
        if (this.checked) {
          $(".card.goldif").fadeIn(update_futties_counter);
        } else {
          $(".card.goldif").fadeOut(update_futties_counter);
        }
      });

      // toggle versus fire
      $("#versusfire").click(function () {
        if (this.checked) {
          $(".card.versusfire").fadeIn(update_futties_counter);
        } else {
          $(".card.versusfire").fadeOut(update_futties_counter);
        }
      });

      // toggle versus ice
      $("#versusice").click(function () {
        if (this.checked) {
          $(".card.versusice").fadeIn(update_futties_counter);
        } else {
          $(".card.versusice").fadeOut(update_futties_counter);
        }
      });

      // toggle motm
      $("#motm").click(function () {
        if (this.checked) {
          $(".card.motm").fadeIn(update_futties_counter);
        } else {
          $(".card.motm").fadeOut(update_futties_counter);
        }
      });

      // toggle gold
      $("#gold").click(function () {
        if (this.checked) {
          $(".card.goldrare").fadeIn(update_futties_counter);
        } else {
          $(".card.goldrare").fadeOut(update_futties_counter);
        }
      });

            // toggle toty honourable mentions
            $("#honourable").click(function () {
        if (this.checked) {
          $("[data-rareflag=64]").fadeIn(update_futties_counter);
        } else {
          $("[data-rareflag=64]").fadeOut(update_futties_counter);
        }
      });

      // toggle batch 1
      $("#togglebatch1").click(function () {
        update_batches(1);
      });

      // toggle batch 2
      $("#togglebatch2").click(function () {
        update_batches(2);
      });

      // toggle batch 3
      $("#togglebatch3").click(function () {
        update_batches(3);
      });

      // toggle all cards
      $("#toggleall").click(function () {
        if (this.checked) {
          $(".card").fadeIn(update_futties_counter);
          $(".checkbox_wrapper_futties input").each(function () {
            $(this).prop("checked", true);
          });

        } else {
          $(".card").fadeOut(update_futties_counter);
          // uncheck all checkboxes in the checkbox_wrapper_futties
          $(".checkbox_wrapper_futties input").each(function () {
            $(this).prop("checked", false);
          });
        }

      });

    });
    $("#counters").hide();
  }

</script>

</html>